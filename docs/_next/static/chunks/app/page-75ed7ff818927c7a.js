(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4512:function(e,t,n){Promise.resolve().then(n.bind(n,7533))},7533:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(7437),l=n(2265),s=e=>{let{presenters:t,onAddPresenter:n,onRemovePresenters:s,speed:o,onSpeedChange:a}=e,[c,i]=(0,l.useState)(""),[u,d]=(0,l.useState)([]);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("form",{className:"flex flex-col gap-4 max-w-md mx-auto",onSubmit:e=>{e.preventDefault(),c&&(n(c),i(""))},children:[(0,r.jsx)("label",{htmlFor:"presenter",className:"block text-sm font-medium mb-2",children:"Presenter"}),(0,r.jsx)("input",{type:"text",id:"presenter",className:"block w-full p-2.5 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"発表者を入力",value:c,onChange:e=>i(e.target.value)}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2",children:"追加"}),(0,r.jsx)("select",{multiple:!0,id:"presenter-list",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5",value:u,onChange:e=>{d(Array.from(e.target.selectedOptions,e=>e.value))},children:t.map((e,t)=>(0,r.jsx)("option",{value:e,children:e},t))}),(0,r.jsx)("button",{type:"button",className:"bg-red-600 text-white rounded px-4 py-2 mt-2",onClick:()=>{u.length>0&&(s(u),d([]))},disabled:0===u.length,children:"選択した発表者を削除"})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("label",{htmlFor:"speed-slider",className:"block text-sm font-medium mb-2",children:["ルーレットスピード: ",o.toFixed(2)]}),(0,r.jsx)("input",{id:"speed-slider",type:"range",min:.05,max:1,step:.01,value:o,onChange:e=>a(Number(e.target.value)),className:"w-full"})]})]})};let o=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#E7E9ED","#8BC34A","#F44336","#00BCD4","#FFC107","#9C27B0","#3F51B5","#CDDC39"],a=(e,t,n,r)=>{let l=(r-90)*Math.PI/180;return{x:e+n*Math.cos(l),y:t+n*Math.sin(l)}},c=(e,t,n,r,l)=>{let s=a(e,t,n,l),o=a(e,t,n,r);return["M ".concat(e," ").concat(t),"L ".concat(s.x," ").concat(s.y),"A ".concat(n," ").concat(n," 0 ").concat(l-r<=180?"0":"1"," 0 ").concat(o.x," ").concat(o.y),"Z"].join(" ")};var i=e=>{let{segments:t,angle:n,setAngle:s,isRunning:i,size:u=300,onStop:d,speed:f}=e,m=u/2,x=u/2,h=u/2-10,p=360/t.length,g=(0,l.useRef)(null),b=(0,l.useRef)(i);return(0,l.useEffect)(()=>{if(!i)return;let e=performance.now(),t=r=>{let l=r-e;e=r,s(n+l*f),g.current=requestAnimationFrame(t)};return g.current=requestAnimationFrame(t),()=>{g.current&&cancelAnimationFrame(g.current)}},[i,s,f,n]),(0,l.useEffect)(()=>{b.current&&!i&&d&&d(n),b.current=i},[i,d,n]),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,r.jsxs)("svg",{width:u,height:u,viewBox:"0 0 ".concat(u," ").concat(u),style:{transform:"rotate(".concat(n,"deg)"),display:"block",margin:"0 auto",pointerEvents:"none"},children:[t.map((e,t)=>{let n=t*p,l=c(m,x,h,n,(t+1)*p),s=o[t%o.length],i=a(m,x,.65*h,n+p/2);return(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:l,fill:s,stroke:"#fff",strokeWidth:2}),(0,r.jsx)("text",{x:i.x,y:i.y,textAnchor:"middle",dominantBaseline:"middle",fontSize:16,fill:"#222",style:{userSelect:"none"},children:e})]},t)}),(0,r.jsx)("circle",{cx:m,cy:x,r:.3*h,fill:"#fff",stroke:"#ccc",strokeWidth:2})]})})},u=e=>{let{isRunning:t,onClick:n}=e;return(0,r.jsx)("button",{type:"button","aria-label":t?"Stop":"Start",className:"".concat("group relative inline-flex h-12 items-center justify-center overflow-hidden rounded-md px-6 font-medium text-neutral-200 disabled:pointer-events-none disabled:opacity-50"," ").concat(t?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"),onClick:n,children:t?(0,r.jsx)("span",{children:"Stop"}):(0,r.jsx)("span",{children:"Start"})})};function d(){let[e,t]=(0,l.useState)([]),[n,o]=(0,l.useState)(!1),[a,c]=(0,l.useState)(0),[d,f]=(0,l.useState)(null),[m,x]=(0,l.useState)(.2),h=(0,l.useRef)(null);return(0,l.useEffect)(()=>()=>{h.current&&clearTimeout(h.current)},[]),(0,r.jsxs)("main",{className:"flex flex-col items-center justify-center min-h-screen gap-8 p-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"発表者抽選アプリ"}),d&&(0,r.jsxs)("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:["当選者: ",d]}),(0,r.jsx)(s,{presenters:e,onAddPresenter:e=>{e&&t(t=>[...t,e])},onRemovePresenters:e=>{t(t=>t.filter(t=>!e.includes(t)))},speed:m,onSpeedChange:x}),(0,r.jsx)(i,{segments:e.length?e:["---"],angle:a,setAngle:c,isRunning:n,onStop:t=>{let n=e.length?e:["---"],r=360/n.length,l=(n.length-1-Math.floor((t%360+360)%360/r))%n.length;f(n[l])},speed:m}),(0,r.jsx)(u,{isRunning:n,onClick:()=>{o(!0),f(null),h.current=setTimeout(()=>{o(!1)},8e3*Math.random()+2e3)}})]})}},622:function(e,t,n){"use strict";var r=n(2265),l=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,c={},i=null,u=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!a.hasOwnProperty(r)&&(c[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===c[r]&&(c[r]=t[r]);return{$$typeof:l,type:e,key:i,ref:u,props:c,_owner:o.current}}t.jsx=c,t.jsxs=c},7437:function(e,t,n){"use strict";e.exports=n(622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=4512)}),_N_E=e.O()}]);